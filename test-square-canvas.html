<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì •ì‚¬ê°í˜• ìº”ë²„ìŠ¤ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: sans-serif; 
            padding: 20px; 
            background: #2a2a2a; 
            color: white; 
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        .canvas-row {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            justify-content: center;
        }
        .canvas-wrapper {
            text-align: center;
        }
        canvas {
            background: white;
            border: 2px solid #4ade80;
            max-width: 400px;
            height: auto;
        }
        h3 { 
            color: #4ade80; 
            margin: 10px 0; 
        }
        .info {
            background: #3a3a3a;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 12px;
        }
        .status { 
            padding: 10px; 
            background: #3a3a3a; 
            border-radius: 5px; 
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ ì •ì‚¬ê°í˜• ìº”ë²„ìŠ¤ ë””ìì¸ í¬ê¸° í…ŒìŠ¤íŠ¸</h1>
        
        <div class="status">
            <strong>ëª©í‘œ:</strong> ë¯¸ë¦¬ë³´ê¸°(600x720)ì™€ ì €ì¥(1500x1500) ëª¨ë‘ì—ì„œ ë””ìì¸ì´ í‹°ì…”ì¸  ëŒ€ë¹„ ë™ì¼í•œ ë¹„ìœ¨ë¡œ í‘œì‹œë˜ì–´ì•¼ í•¨
        </div>

        <div class="canvas-row">
            <div class="canvas-wrapper">
                <h3>ë¯¸ë¦¬ë³´ê¸° (600x720)</h3>
                <canvas id="preview" width="600" height="720"></canvas>
                <div class="info" id="previewInfo"></div>
            </div>
            
            <div class="canvas-wrapper">
                <h3>ì €ì¥ (1500x1500)</h3>
                <canvas id="save" width="1500" height="1500" style="max-width: 400px;"></canvas>
                <div class="info" id="saveInfo"></div>
            </div>
        </div>

        <div class="status">
            <h3>ğŸ“Š ì¸¡ì • ê²°ê³¼</h3>
            <div id="measurements"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ìƒíƒœ ì´ˆê¸°í™”
        window.appState = {
            currentMode: 'front',
            modes: {}
        };
        
        window.outputWidth = 1500;
        window.outputHeight = 1500;

        // í…ŒìŠ¤íŠ¸ìš© ìƒíƒœ
        const testState = {
            designPosition: { x: 0.5, y: 0.4 },
            designScale: 0.3
        };

        function drawTest(canvasId, tshirtColor = '#d4c5a0', designColor = '#3b82f6') {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // ë°°ê²½
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // í‹°ì…”ì¸  (ì‹¤ì œ í•¨ìˆ˜ì™€ ë™ì¼í•œ ë¡œì§)
            const tshirtWidth = 800;
            const tshirtHeight = 1000;
            const scale = Math.min(canvas.width / tshirtWidth, canvas.height / tshirtHeight) * 0.9;
            const tWidth = tshirtWidth * scale;
            const tHeight = tshirtHeight * scale;
            const tX = (canvas.width - tWidth) / 2;
            const tY = (canvas.height - tHeight) / 2;
            
            ctx.fillStyle = tshirtColor;
            ctx.fillRect(tX, tY, tWidth, tHeight);
            
            // ë””ìì¸ (ê°œì„ ëœ ìŠ¤ì¼€ì¼ë§ ì ìš©)
            const designWidth = 200;  // ì›ë³¸ ë””ìì¸ í¬ê¸°
            const designHeight = 200;
            
            // ê¸°ì¤€ í‹°ì…”ì¸  ë„ˆë¹„ (600x720 ìº”ë²„ìŠ¤ì—ì„œ)
            const basePreviewTshirtWidth = 518.4;
            
            // ìŠ¤ì¼€ì¼ íŒ©í„° ê³„ì‚°
            const scaleFactor = tWidth / basePreviewTshirtWidth;
            
            // ë””ìì¸ í¬ê¸° ê³„ì‚°
            const dWidth = designWidth * testState.designScale * scaleFactor;
            const dHeight = designHeight * testState.designScale * scaleFactor;
            
            // ìœ„ì¹˜ ê³„ì‚°
            const dX = tX + testState.designPosition.x * tWidth - dWidth / 2;
            const dY = tY + testState.designPosition.y * tHeight - dHeight / 2;
            
            // ë””ìì¸ ê·¸ë¦¬ê¸°
            ctx.fillStyle = designColor;
            ctx.beginPath();
            ctx.arc(dX + dWidth/2, dY + dHeight/2, dWidth/2, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'white';
            ctx.font = `bold ${dWidth/3}px sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('OK', dX + dWidth/2, dY + dHeight/2);
            
            // ì •ë³´ ì—…ë°ì´íŠ¸
            const info = document.getElementById(canvasId + 'Info');
            info.innerHTML = `
                ìº”ë²„ìŠ¤: ${canvas.width}x${canvas.height}<br>
                í‹°ì…”ì¸ : ${Math.round(tWidth)}x${Math.round(tHeight)}<br>
                ë””ìì¸: ${Math.round(dWidth)}x${Math.round(dHeight)}<br>
                ë””ìì¸/í‹°ì…”ì¸  ë¹„ìœ¨: ${(dWidth/tWidth * 100).toFixed(1)}%
            `;
            
            return {
                canvas: { width: canvas.width, height: canvas.height },
                tshirt: { width: tWidth, height: tHeight },
                design: { width: dWidth, height: dHeight },
                ratio: dWidth / tWidth
            };
        }

        // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        const previewResult = drawTest('preview');
        const saveResult = drawTest('save');
        
        // ê²°ê³¼ ë¹„êµ
        const measurements = document.getElementById('measurements');
        const ratioDiff = Math.abs(previewResult.ratio - saveResult.ratio);
        const isConsistent = ratioDiff < 0.01;
        
        measurements.innerHTML = `
            <p>ë¯¸ë¦¬ë³´ê¸° ë””ìì¸/í‹°ì…”ì¸  ë¹„ìœ¨: <strong>${(previewResult.ratio * 100).toFixed(2)}%</strong></p>
            <p>ì €ì¥ ë””ìì¸/í‹°ì…”ì¸  ë¹„ìœ¨: <strong>${(saveResult.ratio * 100).toFixed(2)}%</strong></p>
            <p>ì°¨ì´: <strong style="color: ${isConsistent ? '#4ade80' : '#ef4444'}">${(ratioDiff * 100).toFixed(2)}%</strong></p>
            <p>ê²°ê³¼: <strong style="color: ${isConsistent ? '#4ade80' : '#ef4444'}">${isConsistent ? 'âœ… ì¼ê´€ì„± ìˆìŒ' : 'âŒ ë¶ˆì¼ì¹˜'}</strong></p>
        `;
    </script>
</body>
</html>