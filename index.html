<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="OKSTAR KOREA COMPANY">
    <meta name="copyright" content="Â© 2024 OKSTAR KOREA COMPANY. All Rights Reserved.">
    <meta name="description" content="Professional T-Shirt Design Solution by OKSTAR KOREA - v5.1">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-313E028ZYQ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-313E028ZYQ');
    </script>
    
    <title>ì˜¥ìŠ¤íƒ€ í”„ë¦°íŒ… í”„ë¡œê·¸ë¨ v5.1 | OKSTAR KOREA COMPANY</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #1f2937;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .company-badge {
            display: inline-block;
            background: #4F46E5;
            color: white;
            padding: 6px 16px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }

        /* ëª¨ë“œ ì„ íƒ ì¹´ë“œ */
        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: #f0f9ff;
            border-radius: 15px;
            border: 2px solid #3b82f6;
            flex-wrap: wrap;
        }

        .mode-card {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
        }

        .mode-card.active {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            color: white;
            border-color: #3b82f6;
        }

        .mode-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .mode-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .mode-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .instructions {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #92400e;
        }

        /* ëª¨ë“œë³„ ì»¨í…ì¸  */
        .mode-content {
            display: none;
        }

        .mode-content.active {
            display: block;
        }

        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .upload-grid.single {
            grid-template-columns: 1fr;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .upload-section {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        input[type="file"] {
            display: none;
        }

        .upload-label {
            display: block;
            padding: 30px 15px;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            color: #475569;
            background: white;
        }

        .upload-label:hover {
            border-color: #6366f1;
            background: #f0f9ff;
        }

        .upload-label.uploaded {
            border-color: #10b981;
            background: #ecfdf5;
            color: #059669;
        }

        .file-list {
            max-height: 120px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 8px;
            background: white;
            margin-top: 10px;
            font-size: 12px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px;
            margin: 2px 0;
            background: #f8fafc;
            border-radius: 4px;
        }

        .tab-navigation {
            display: flex;
            gap: 5px;
            overflow-x: auto;
            padding: 10px;
            background: #f1f5f9;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 6px 12px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .tab-button:hover {
            background: #f0f9ff;
            border-color: #6366f1;
        }

        .tab-button.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }

        .canvas-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .canvas-container.single {
            grid-template-columns: 1fr;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .canvas-section {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
        }

        .canvas-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        canvas {
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            background: white;
            width: 100%;
            height: auto;
            cursor: move;
            display: block;
        }

        .controls {
            margin-top: 15px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .control-label {
            font-size: 13px;
            color: #475569;
            min-width: 60px;
        }

        input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            background: #e2e8f0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #6366f1;
            cursor: pointer;
        }

        .scale-value {
            min-width: 45px;
            text-align: right;
            font-weight: bold;
            color: #1f2937;
            font-size: 13px;
        }

        .save-button {
            width: 100%;
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .save-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
        }

        .save-button:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 12px;
            border-top: 1px solid #eee;
            margin-top: 30px;
            background: #f9fafb;
            border-radius: 10px;
        }

        .position-btn {
            padding: 6px 12px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .position-btn:hover {
            border-color: #3b82f6;
        }

        .position-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* ë””í…Œì¼ ì»¨íŠ¸ë¡¤ ë°•ìŠ¤ - ë…ë¦½ì ì¸ ìŠ¤íƒ€ì¼ */
        .detail-control-box {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #10b981;
            margin: 20px auto;
            max-width: 600px;
        }

        .detail-control-section {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .detail-control-title {
            font-weight: bold;
            color: #059669;
            margin-bottom: 10px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .mode-selector {
                flex-direction: column;
            }
            
            .upload-grid {
                grid-template-columns: 1fr;
            }
            
            .canvas-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                ğŸ¨ ì˜¥ìŠ¤íƒ€ í”„ë¦°íŒ… í”„ë¡œê·¸ë¨
                <span class="version-badge">v5.1</span>
            </h1>
            <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">Multi-Mode Professional T-Shirt Design Solution</p>
            <div class="company-badge">OKSTAR KOREA COMPANY</div>
        </div>

        <!-- ëª¨ë“œ ì„ íƒ -->
        <div class="mode-selector">
            <div class="mode-card active" data-mode="front">
                <div class="mode-icon">ğŸ‘”</div>
                <div class="mode-title">ì•íŒ ì „ìš©</div>
                <div class="mode-desc">ê°€ìŠ´ ë¡œê³ ë§Œ ìˆëŠ” ë””ìì¸</div>
            </div>
            <div class="mode-card" data-mode="frontback">
                <div class="mode-icon">ğŸ‘•</div>
                <div class="mode-title">ì•íŒ+ë’·íŒ</div>
                <div class="mode-desc">ì•ë’¤ ëª¨ë‘ ìˆëŠ” í’€ë””ìì¸</div>
            </div>
            <div class="mode-card" data-mode="combine">
                <div class="mode-icon">ğŸ¨</div>
                <div class="mode-title">ë””ìì¸ í•©ì„±</div>
                <div class="mode-desc">ì•ë’¤ ë””ìì¸ì„ í•˜ë‚˜ë¡œ í•©ì¹˜ê¸°</div>
            </div>
            <div class="mode-card" data-mode="colorchip">
                <div class="mode-icon">ğŸ¨</div>
                <div class="mode-title">ì»¬ëŸ¬ì¹© ì œì‘</div>
                <div class="mode-desc">ìƒ‰ìƒë³„ ì œí’ˆì„ ê¹”ë”í•˜ê²Œ ì •ë¦¬</div>
            </div>
        </div>

        <div class="instructions">
            ğŸ’¡ <strong>ì‚¬ìš©ë²•:</strong> 
            <span id="modeInstruction">1ï¸âƒ£ ì•íŒ ë¬´ì§€ í‹°ì…”ì¸  ì—…ë¡œë“œ 2ï¸âƒ£ ì•íŒ ë””ìì¸ ë°°ì¹˜ 3ï¸âƒ£ ì €ì¥ â†’ ìƒ‰ìƒë³„ ìë™ ì €ì¥!</span>
        </div>

        <!-- í”½ì…€ í¬ê¸° ì„¤ì • -->
        <div style="text-align: center; margin: 15px 0;">
            <button id="pixelSizeBtn" style="padding: 8px 16px; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer;">
                ğŸ“ ì¶œë ¥ í¬ê¸° ë³€ê²½ (í˜„ì¬: 1500x1500px)
            </button>
        </div>

        <!-- ëª¨ë“œë³„ ì»¨í…ì¸  ì˜ì—­ -->
        <div id="frontMode" class="mode-content active"></div>
        <div id="frontbackMode" class="mode-content"></div>
        <div id="combineMode" class="mode-content"></div>
        <div id="colorchipMode" class="mode-content"></div>

        <!-- íŒŒì¼ëª… ì„¤ì • ë° ì €ì¥ ë²„íŠ¼ -->
        <div style="margin: 20px 0;">
            <div style="text-align: center; margin-bottom: 10px;">
                <label style="margin-right: 10px; font-weight: bold;">íŒŒì¼ëª…:</label>
                <input type="text" id="filenameInput" placeholder="okstar" value="okstar" 
                       style="padding: 8px; border: 2px solid #e2e8f0; border-radius: 6px; width: 200px;">
                <span id="filenameHint" style="margin-left: 10px; color: #6b7280; font-size: 12px;">
                    ì˜ˆì‹œ: okstar-01-front.png
                </span>
            </div>
            <button id="saveBtn" class="save-button" disabled>
                <span>ğŸ“¦</span>
                <span id="saveBtnText">íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</span>
            </button>
        </div>

        <div class="footer">
            <div style="font-size: 14px; font-weight: bold; color: #4F46E5; margin-bottom: 5px;">
                OKSTAR KOREA COMPANY
            </div>
            Â© 2024 All Rights Reserved. Unauthorized use is strictly prohibited.<br>
            ë³¸ í”„ë¡œê·¸ë¨ì€ OKSTAR KOREA COMPANYì˜ ì§€ì  ì¬ì‚°ì…ë‹ˆë‹¤.
        </div>
    </div>

    <!-- JSZip ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- ì „ì—­ ì„¤ì • ë° ìƒíƒœ -->
    <script>
        // ì „ì—­ ì„¤ì •
        window.outputWidth = 1500;
        window.outputHeight = 1500;  // ì •ì‚¬ê°í˜• ìœ ì§€
        
        // ì „ì—­ ìƒíƒœ ê´€ë¦¬
        window.appState = {
            currentMode: 'front',
            modes: {
                front: {},
                frontback: {},
                combine: {},
                colorchip: {}
            }
        };

        // í”½ì…€ í¬ê¸° ì„¤ì •
        document.getElementById('pixelSizeBtn').addEventListener('click', () => {
            const width = prompt('ê°€ë¡œ í¬ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš” (px):', window.outputWidth);
            const height = prompt('ì„¸ë¡œ í¬ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš” (px):', window.outputHeight);
            
            if (width && height && !isNaN(width) && !isNaN(height)) {
                // TODO(human): 5:6 ë¹„ìœ¨ ìœ ì§€ ë¡œì§ êµ¬í˜„
                window.outputWidth = parseInt(width);
                window.outputHeight = parseInt(height);
                document.getElementById('pixelSizeBtn').textContent = 
                    `ğŸ“ ì¶œë ¥ í¬ê¸° ë³€ê²½ (í˜„ì¬: ${window.outputWidth}x${window.outputHeight}px)`;
            }
        });

        // íŒŒì¼ëª… íŒíŠ¸ ì—…ë°ì´íŠ¸
        window.updateFilenameHint = function(mode) {
            const filenameHint = document.getElementById('filenameHint');
            const hints = {
                'front': 'ì˜ˆì‹œ: okstar-01.png',
                'frontback': 'ì˜ˆì‹œ: okstar-01-front.png, okstar-01-back.png',
                'combine': 'ì˜ˆì‹œ: okstar-01-combined.png',
                'colorchip': 'ì˜ˆì‹œ: colorchip-20241128.png'
            };
            filenameHint.textContent = hints[mode] || '';
        };

        // ì €ì¥ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        window.updateSaveButton = function() {
            const saveBtn = document.getElementById('saveBtn');
            const saveBtnText = document.getElementById('saveBtnText');
            
            let ready = false;
            let text = 'íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”';
            
            // ê° ëª¨ë“œë³„ ì²´í¬ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ êµ¬í˜„
            if (window[`checkMode${appState.currentMode.charAt(0).toUpperCase() + appState.currentMode.slice(1)}Ready`]) {
                const result = window[`checkMode${appState.currentMode.charAt(0).toUpperCase() + appState.currentMode.slice(1)}Ready`]();
                ready = result.ready;
                text = result.text;
            }
            
            saveBtn.disabled = !ready;
            saveBtnText.textContent = text;
        };

        // ì €ì¥ ì„±ê³µ ë©”ì‹œì§€
        window.showSaveSuccess = function(message) {
            const saveBtnText = document.getElementById('saveBtnText');
            const originalText = saveBtnText.textContent;
            
            saveBtnText.textContent = `âœ… ${message}`;
            setTimeout(() => {
                saveBtnText.textContent = originalText;
                window.updateSaveButton();
            }, 2000);
        };

        // ZIP ë‹¤ìš´ë¡œë“œ í—¬í¼
        window.downloadZip = async function(files, folderName) {
            const zip = new JSZip();
            const folder = zip.folder(folderName);
            
            files.forEach(file => {
                folder.file(file.name, file.blob);
            });
            
            const content = await zip.generateAsync({
                type: 'blob',
                compression: 'DEFLATE',
                compressionOptions: { level: 6 }
            });
            
            const a = document.createElement('a');
            a.href = URL.createObjectURL(content);
            a.download = `${folderName}_${Date.now()}.zip`;
            a.click();
            
            window.showSaveSuccess(`${files.length}ê°œ íŒŒì¼ ì €ì¥ ì™„ë£Œ!`);
        };

        // ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('saveBtn').addEventListener('click', () => {
            const modeName = appState.currentMode.charAt(0).toUpperCase() + appState.currentMode.slice(1);
            if (window[`saveMode${modeName}`]) {
                window[`saveMode${modeName}`]();
            }
        });

        // ëª¨ë“œ ì„ íƒ ì´ˆê¸°í™”
        function initModeSelector() {
            const modeCards = document.querySelectorAll('.mode-card');
            const modeContents = document.querySelectorAll('.mode-content');
            const modeInstruction = document.getElementById('modeInstruction');
            
            const instructions = {
                'front': '1ï¸âƒ£ ì•íŒ ë¬´ì§€ í‹°ì…”ì¸  ì—…ë¡œë“œ 2ï¸âƒ£ ì•íŒ ë””ìì¸ ë°°ì¹˜ 3ï¸âƒ£ ì €ì¥ â†’ ìƒ‰ìƒë³„ ìë™ ì €ì¥!',
                'frontback': '1ï¸âƒ£ ì•ë’¤ ë¬´ì§€ í‹°ì…”ì¸  ê°ê° ì—…ë¡œë“œ 2ï¸âƒ£ ì•íŒ ë””ìì¸ ë°°ì¹˜ (ì‘ê²Œ) 3ï¸âƒ£ ë’·íŒ ë””ìì¸ ë°°ì¹˜ (í¬ê²Œ) 4ï¸âƒ£ ì €ì¥!',
                'combine': '1ï¸âƒ£ ì™„ì„±ëœ ì•íŒ ì´ë¯¸ì§€ ì—…ë¡œë“œ 2ï¸âƒ£ ì™„ì„±ëœ ë’·íŒ ì´ë¯¸ì§€ ì—…ë¡œë“œ 3ï¸âƒ£ í¬ê¸° ì¡°ì ˆ 4ï¸âƒ£ í•©ì„± ì´ë¯¸ì§€ ì €ì¥!',
                'colorchip': '1ï¸âƒ£ ì œí’ˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ìµœëŒ€ 20ê°œ) 2ï¸âƒ£ ìƒ‰ìƒëª… í™•ì¸/ìˆ˜ì • 3ï¸âƒ£ ë ˆì´ì•„ì›ƒ ì¡°ì ˆ 4ï¸âƒ£ ì»¬ëŸ¬ì¹© ì €ì¥!'
            };
            
            modeCards.forEach(card => {
                card.addEventListener('click', () => {
                    const mode = card.dataset.mode;
                    const previousMode = appState.currentMode;
                    appState.currentMode = mode;
                    
                    // ì´ì „ ëª¨ë“œ ì •ë¦¬
                    if (previousMode && window[`cleanupMode${previousMode.charAt(0).toUpperCase() + previousMode.slice(1)}`]) {
                        try {
                            window[`cleanupMode${previousMode.charAt(0).toUpperCase() + previousMode.slice(1)}`]();
                        } catch (e) {
                            console.warn('Cleanup failed for mode:', previousMode, e);
                        }
                    }
                    
                    // UI ì—…ë°ì´íŠ¸
                    modeCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    
                    modeContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(mode + 'Mode').classList.add('active');
                    
                    modeInstruction.textContent = instructions[mode];
                    window.updateFilenameHint(mode);
                    
                    // í•´ë‹¹ ëª¨ë“œ ì´ˆê¸°í™”
                    const initFunctionName = `initMode${mode.charAt(0).toUpperCase() + mode.slice(1)}`;
                    if (mode === 'front') {
                        // Mode 1: front
                        if (window.initMode1) {
                            window.initMode1();
                        } else {
                            console.error('initMode1 not found');
                        }
                    } else if (mode === 'frontback') {
                        // Mode 2: frontback
                        if (window.initMode2) {
                            window.initMode2();
                        }
                    } else if (mode === 'combine') {
                        // Mode 3: combine
                        if (window.initMode3) {
                            window.initMode3();
                        }
                    } else if (mode === 'colorchip') {
                        // Mode 4: colorchip
                        if (window.initMode4) {
                            window.initMode4();
                        }
                    }
                    
                    // ì €ì¥ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                    window.updateSaveButton();
                });
            });
        }

        // ìš°í´ë¦­ ë°©ì§€
        document.addEventListener('contextmenu', e => {
            e.preventDefault();
            alert('Â© OKSTAR KOREA COMPANY\nìš°í´ë¦­ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
            return false;
        });

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            initModeSelector();
            
            // ê¸°ë³¸ ëª¨ë“œ(Mode 1) ì´ˆê¸°í™”
            setTimeout(() => {
                if (window.initMode1) {
                    console.log('Initializing Mode 1...');
                    window.initMode1();
                } else {
                    console.error('initMode1 function not found. Make sure mode1-front.js is loaded.');
                }
            }, 100); // ì•½ê°„ì˜ ì§€ì—°ì„ ì£¼ì–´ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ë„ë¡ í•¨
        });
    </script>

    <!-- ìœ í‹¸ë¦¬í‹° ë¡œë“œ -->
    <script src="utils.js"></script>
    
    <!-- ì»´í¬ë„ŒíŠ¸ ë¡œë“œ -->
    <script src="mode1-front.js"></script>
    <script src="mode2-frontback.js"></script>
    <script src="mode3-combine.js"></script>
    <script src="mode4-colorchip.js"></script>
</body>
</html>